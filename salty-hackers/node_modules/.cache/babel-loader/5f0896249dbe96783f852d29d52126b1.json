{"ast":null,"code":"var _jsxFileName = \"/Users/jamiesullivan/lambda/Frontend/salty-hackers/src/components/Sign Up/SignUp.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport SignUpForm from './SignUpForm';\nimport { Route, Link, useHistory } from 'react-router-dom';\nimport * as yup from 'yup';\nimport formSchema from '../../validation/formSchema';\nconst intaialFormValues = {\n  username: '',\n  password: ''\n};\nconst initalFormErrors = {\n  first_name: '',\n  last_name: '',\n  username: '',\n  password: ''\n};\nconst intialDisabled = true;\nconst url = `https://saltyhackers2.herokuapp.com/auth/register`;\nexport default function SignUp() {\n  const {\n    push\n  } = useHistory(); //state\n\n  const [formValues, setFormValues] = useState(intaialFormValues);\n  const [users, addUsers] = useState([]);\n  const [formErrors, setFormErrors] = useState(initalFormErrors);\n  const [disabled, setDisabled] = useState(intialDisabled); //post new user  \n\n  const postNewUser = newUser => {\n    axios.post(url, newUser).then(res => {\n      console.log(res.data, 'user created');\n      const id = res.data.data.id;\n      console.log(res.data.data.id, '<--res.data.data.id consolelog');\n      localStorage.setItem(\"id\", id);\n      addUsers([res.data, ...users]);\n    }).catch(err => {\n      debugger;\n    }).finally(() => {\n      setFormValues(intaialFormValues);\n    });\n  }; //change handlers\n\n\n  const onInputChange = evt => {\n    const name = evt.target.name;\n    const value = evt.target.value;\n    yup.reach(formSchema, name).validate(value).then(valid => {\n      setFormErrors({ ...formErrors,\n        [name]: ''\n      });\n    }).catch(err => {\n      setFormErrors({ ...formErrors,\n        [name]: err.errors[0]\n      });\n    });\n    setFormValues({ ...formValues,\n      [name]: value\n    });\n  };\n\n  const onSubmit = evt => {\n    evt.preventDefault();\n    const newUser = {\n      username: formValues.username.trim(),\n      password: formValues.password.trim()\n    };\n    console.log(newUser);\n    postNewUser(newUser);\n    push(`/login`);\n  };\n\n  useEffect(() => {\n    formSchema.isValid(formValues).then(valid => {\n      setDisabled(!valid);\n    });\n  }, [formValues]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/sign-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(SignUpForm, {\n    values: formValues,\n    onSubmit: onSubmit,\n    onInputChange: onInputChange,\n    errors: formErrors,\n    disabled: disabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, \"Already have an account?\")));\n}","map":{"version":3,"sources":["/Users/jamiesullivan/lambda/Frontend/salty-hackers/src/components/Sign Up/SignUp.js"],"names":["React","useState","useEffect","axios","SignUpForm","Route","Link","useHistory","yup","formSchema","intaialFormValues","username","password","initalFormErrors","first_name","last_name","intialDisabled","url","SignUp","push","formValues","setFormValues","users","addUsers","formErrors","setFormErrors","disabled","setDisabled","postNewUser","newUser","post","then","res","console","log","data","id","localStorage","setItem","catch","err","finally","onInputChange","evt","name","target","value","reach","validate","valid","errors","onSubmit","preventDefault","trim","isValid","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport SignUpForm from './SignUpForm';\nimport { Route, Link, useHistory } from 'react-router-dom';\nimport * as yup from 'yup';\nimport formSchema from '../../validation/formSchema';\n\n\nconst intaialFormValues = {\n    username: '',\n    password: ''\n  }\n  \n  const initalFormErrors = {\n    first_name: '',\n    last_name: '',\n    username: '',\n    password: ''\n  }\n\n  const intialDisabled = true \n\n  const url = `https://saltyhackers2.herokuapp.com/auth/register`\n\n  export default function SignUp() {\n    const { push } = useHistory();\n    //state\n\n    const [ formValues, setFormValues ] = useState(intaialFormValues)\n    const [ users, addUsers] = useState([])\n    const [ formErrors, setFormErrors ] = useState(initalFormErrors)\n    const [ disabled, setDisabled ] = useState(intialDisabled)\n\n\n  //post new user  \n    const postNewUser = newUser => {\n        axios.post(url, newUser)\n        .then(res => {\n          console.log(res.data, 'user created')\n          const id = res.data.data.id;\n          console.log(res.data.data.id, '<--res.data.data.id consolelog')\n          localStorage.setItem(\"id\", id)\n          addUsers([res.data, ...users])\n        })\n        .catch(err => {\n          debugger\n        })\n        .finally(() => {\n          setFormValues(intaialFormValues)\n        })\n      \n      }\n\n\n  //change handlers\n      const onInputChange = evt => {\n          const name = evt.target.name\n          const value = evt.target.value\n\n\n          yup\n            .reach(formSchema, name)\n            .validate(value)\n            .then(valid => {\n              setFormErrors({\n                ...formErrors,\n                [name]: ''\n              })\n            })\n            .catch(err => {\n              setFormErrors({\n                ...formErrors,\n                [name]:err.errors[0]\n              })\n            })\n\n            setFormValues({\n              ...formValues, [name]:value\n            })\n      }    \n\n        \n      const onSubmit = evt => {\n        evt.preventDefault()\n        const newUser = {\n            username: formValues.username.trim(),\n            password: formValues.password.trim(),\n          }\n          console.log(newUser)\n          postNewUser(newUser)\n          push(`/login`)\n          }\n\n  useEffect(() => {\n        formSchema.isValid(formValues)\n            .then(valid => {\n              setDisabled(!valid)\n            })\n          }, [formValues])\n\n\n      return (\n          \n          <div>\n\n              <Route path='/sign-up'> \n                <SignUpForm values = {formValues} onSubmit = {onSubmit}\n                onInputChange = {onInputChange} errors = {formErrors} disabled={disabled} />\n              </Route>\n\n              <Link to='/login'>\n              <div style={{textAlign:'center'}}>Already have an account?</div>\n            </Link>\n          </div>\n\n      \n      \n\n      )\n\n\n  }\n\n\n  \n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}