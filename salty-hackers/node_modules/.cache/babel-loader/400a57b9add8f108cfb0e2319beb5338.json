{"ast":null,"code":"var _jsxFileName = \"/Users/jamiesullivan/lambda/Frontend/salty-hackers/src/components/Login/Login.js\";\nimport React from 'react';\nimport { axiosWithAuth } from '../../utils/axiosWithAuth';\nimport LoginForm from './LoginForm';\nimport LoadingSpinner from '../Styling/LoadingSpinner';\n\nclass Login extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLoading: false,\n      credentials: {\n        username: '',\n        password: ''\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        credentials: { ...this.state.credentials,\n          [e.target.name]: e.target.value\n        }\n      });\n    };\n\n    this.login = e => {\n      e.preventDefault();\n      this.setState({\n        isLoading: true\n      });\n      axiosWithAuth().post('/auth/login', this.state.credentials).then(res => {\n        // console.log(res)\n        localStorage.setItem('token', res.data.password);\n        this.props.history.push('/feed');\n        this.setState({\n          isLoading: false\n        });\n      }).catch(err => {\n        console.log(err);\n        this.props.history.push('/login');\n        this.setState({\n          isLoading: false\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, isLoading ? /*#__PURE__*/React.createElement(LoadingSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 30\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(LoginForm, {\n      values: this.state.credentials,\n      onChange: this.handleChange,\n      onSubmit: this.login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/jamiesullivan/lambda/Frontend/salty-hackers/src/components/Login/Login.js"],"names":["React","axiosWithAuth","LoginForm","LoadingSpinner","Login","Component","state","isLoading","credentials","username","password","handleChange","e","setState","target","name","value","login","preventDefault","post","then","res","localStorage","setItem","data","props","history","push","catch","err","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,2BAA9B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,cAAP,MAA2B,2BAA3B;;AAEA,MAAMC,KAAN,SAAoBJ,KAAK,CAACK,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAChCC,KADgC,GACxB;AACJC,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,WAAW,EAAE;AACTC,QAAAA,QAAQ,EAAE,EADD;AAETC,QAAAA,QAAQ,EAAE;AAFD;AAFT,KADwB;;AAAA,SAShCC,YATgC,GASjBC,CAAC,IAAI;AAChB,WAAKC,QAAL,CAAc;AACVL,QAAAA,WAAW,EAAE,EACT,GAAG,KAAKF,KAAL,CAAWE,WADL;AAET,WAACI,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AAFjB;AADH,OAAd;AAMH,KAhB+B;;AAAA,SAkBhCC,KAlBgC,GAkBxBL,CAAC,IAAI;AACTA,MAAAA,CAAC,CAACM,cAAF;AACA,WAAKL,QAAL,CAAc;AAAEN,QAAAA,SAAS,EAAE;AAAb,OAAd;AACAN,MAAAA,aAAa,GACRkB,IADL,CACU,aADV,EACyB,KAAKb,KAAL,CAAWE,WADpC,EAEKY,IAFL,CAEUC,GAAG,IAAI;AACT;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACG,IAAJ,CAASd,QAAvC;AACA,aAAKe,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACA,aAAKd,QAAL,CAAc;AAACN,UAAAA,SAAS,EAAE;AAAZ,SAAd;AACH,OAPL,EAQKqB,KARL,CAQWC,GAAG,IAAI;AACVC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,aAAKJ,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACA,aAAKd,QAAL,CAAc;AAACN,UAAAA,SAAS,EAAE;AAAZ,SAAd;AACH,OAZL;AAaH,KAlC+B;AAAA;;AAoChCyB,EAAAA,MAAM,GAAG;AACL,UAAM;AAACzB,MAAAA;AAAD,QAAc,KAAKD,KAAzB;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKC,SAAS,gBAAG,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,gBACV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,SAAD;AACI,MAAA,MAAM,EAAE,KAAKD,KAAL,CAAWE,WADvB;AAEI,MAAA,QAAQ,EAAE,KAAKG,YAFnB;AAGI,MAAA,QAAQ,EAAE,KAAKM,KAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAFJ,CADJ;AAaH;;AAnD+B;;AAsDpC,eAAeb,KAAf","sourcesContent":["import React from 'react';\nimport { axiosWithAuth } from '../../utils/axiosWithAuth';\nimport LoginForm from './LoginForm';\nimport LoadingSpinner from '../Styling/LoadingSpinner';\n\nclass Login extends React.Component {\n    state = {\n        isLoading: false,\n        credentials: {\n            username: '',\n            password: ''\n        }\n    };\n\n    handleChange = e => {\n        this.setState({\n            credentials: {\n                ...this.state.credentials,\n                [e.target.name]: e.target.value\n            }\n        });\n    };\n\n    login = e => {\n        e.preventDefault();\n        this.setState({ isLoading: true })\n        axiosWithAuth()\n            .post('/auth/login', this.state.credentials)\n            .then(res => {\n                // console.log(res)\n                localStorage.setItem('token', res.data.password)\n                this.props.history.push('/feed')\n                this.setState({isLoading: false})\n            })\n            .catch(err => {\n                console.log(err)\n                this.props.history.push('/login')\n                this.setState({isLoading: false})\n            });\n    }\n\n    render() {\n        const {isLoading} = this.state\n        return (\n            <main>\n                {isLoading ? <LoadingSpinner /> : \n                <div>\n                    <LoginForm\n                        values={this.state.credentials}\n                        onChange={this.handleChange}\n                        onSubmit={this.login}\n                    />\n                </div>\n                }\n            </main>\n        )\n    }\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}